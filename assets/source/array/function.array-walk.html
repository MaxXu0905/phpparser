<HTML  ><HEAD  ><TITLE  >array_walk</TITLE
><META  NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK  REL="HOME" TITLE="PHP 手册" HREF="index.html"><LINK  REL="UP" TITLE="数组函数库" HREF="ref.array.html"><LINK  REL="PREVIOUS" TITLE="array_values" HREF="function.array-values.html"><LINK  REL="NEXT" TITLE="array" HREF="function.array.html"><META  HTTP-EQUIV="Content-type" CONTENT="text/html; charset=gb2312"><LINK REL="stylesheet" HREF="style.css"></HEAD
><BODY TOPMARGIN="0" LEFTMARGIN="0"  CLASS="refentry" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#840084" ALINK="#0000FF" ><TABLE BORDER="0" WIDTH="100%" HEIGHT="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD COLSPAN="3"><DIV CLASS="NAVHEADER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD><TABLE  SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0" ><TR  ><TH  COLSPAN="3" ALIGN="center" >PHP 手册</TH
></TR
><TR  ><TD  WIDTH="10%" ALIGN="left" VALIGN="bottom" ><A  HREF="function.array-values.html" ACCESSKEY="P" >后退</A
></TD
><TD  WIDTH="80%" ALIGN="center" VALIGN="bottom" ></TD
><TD  WIDTH="10%" ALIGN="right" VALIGN="bottom" ><A  HREF="function.array.html" ACCESSKEY="N" >前进</A
></TD
></TR
></TABLE></TD></TR><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR></TABLE></DIV></TD></TR><TR><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD><TD HEIGHT="100%" VALIGN="TOP" WIDTH="100%"><BR><H1  ><A  NAME="function.array-walk" ></A
>array_walk</H1
><DIV  CLASS="refnamediv" ><A  NAME="AEN9470" ></A
><P  >    (PHP 3&#62;= 3.0.3, PHP 4 )</P
>array_walk&nbsp;--&nbsp;
     对数组中的每个成员应用用户函数
    </DIV
><DIV  CLASS="refsect1" ><A  NAME="AEN9473" ></A
><H2  >说明</H2
>bool <B  CLASS="methodname" >array_walk</B
> ( array array, callback function [, mixed userdata])<BR  ></BR
><P  >&#13;     如果成功则返回 <TT  CLASS="constant" ><B  >TRUE</B
></TT
>，失败则返回 <TT  CLASS="constant" ><B  >FALSE</B
></TT
>。
    </P
><P  >&#13;     将用户自定义函数 <TT  CLASS="parameter" ><I  >function</I
></TT
> 应用到
     <TT  CLASS="parameter" ><I  >array</I
></TT
> 数组中的每个单元。典型情况下
     <TT  CLASS="parameter" ><I  >function</I
></TT
> 接受两个参数。<TT  CLASS="parameter" ><I  >array</I
></TT
>
     参数的值作为第一个，键名作为第二个。如果提供了可选参数
     <TT  CLASS="parameter" ><I  >userdata</I
></TT
>，将被作为第三个参数传递给
     callback <TT  CLASS="parameter" ><I  >function</I
></TT
>。
    </P
><P  >&#13;     如果 <TT  CLASS="parameter" ><I  >function</I
></TT
> 函数需要的参数比给出的多，则每次
     <B  CLASS="function" >array_walk()</B
> 调用 <TT  CLASS="parameter" ><I  >function</I
></TT
>
     时都会产生一个 <A  HREF="ref.errorfunc.html#errorfunc.constants" >E_WARNING</A
>
     级的错误。这些警告可以通过在 <B  CLASS="function" >array_walk()</B
> 调用前加上
     PHP 的错误操作符 <A  HREF="language.operators.errorcontrol.html" >@</A
>
     来抑制，或者用 <A  HREF="function.error-reporting.html" ><B  CLASS="function" >error_reporting()</B
></A
>。
    </P
><DIV  CLASS="note" ><BLOCKQUOTE  CLASS="note" ><P  ><B  >注: </B
>
      如果 <TT  CLASS="parameter" ><I  >function</I
></TT
> 需要直接作用于数组中的值，则给
      <TT  CLASS="parameter" ><I  >function</I
></TT
> 的第一个参数指定为
      <A  HREF="language.references.html" >reference</A
>。这样任何对这些单元的改变也将会改变原始数组本身。
     </P
></BLOCKQUOTE
></DIV
><DIV  CLASS="note" ><BLOCKQUOTE  CLASS="note" ><P  ><B  >注: </B
>
      将键名和 userdata 传递到 <TT  CLASS="parameter" ><I  >func</I
></TT
> 中是 PHP 4.0 新增加的。
     </P
></BLOCKQUOTE
></DIV
><P  >&#13;     <B  CLASS="function" >array_walk()</B
> 不会受到 <TT  CLASS="parameter" ><I  >array</I
></TT
>
     内部数组指针的影响。<B  CLASS="function" >array_walk()</B
>
     会遍历整个数组而不管指针的位置。要重置指针，用 <A  HREF="function.reset.html" ><B  CLASS="function" >reset()</B
></A
>。在
     PHP 3 中，<B  CLASS="function" >array_walk()</B
> 会重置指针。
    </P
><P  >&#13;     用户不应在回调函数中改变该数组本身。例如增加/删除单元，unset
     单元等等。如果 <B  CLASS="function" >array_walk()</B
>
     作用的数组改变了，则此函数的的行为未经定义，且不可预期。
    </P
><P  >&#13;     <TABLE  WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0" CLASS="EXAMPLE" ><TR  ><TD  ><DIV  CLASS="example" ><A  NAME="AEN9522" ></A
><P  ><B  >例子 1. <B  CLASS="function" >array_walk()</B
> 例子</B
></P
><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5" ><TR  ><TD  ><code ><font  color="#000000">
<font  color="#0000BB">&lt;?php<br  />$fruits </font><font  color="#007700">= array (</font><font  color="#DD0000">"d"</font><font  color="#007700">=&gt;</font><font  color="#DD0000">"lemon"</font><font  color="#007700">, </font><font  color="#DD0000">"a"</font><font  color="#007700">=&gt;</font><font  color="#DD0000">"orange"</font><font  color="#007700">, </font><font  color="#DD0000">"b"</font><font  color="#007700">=&gt;</font><font  color="#DD0000">"banana"</font><font  color="#007700">, </font><font  color="#DD0000">"c"</font><font  color="#007700">=&gt;</font><font  color="#DD0000">"apple"</font><font  color="#007700">);<br  /><br  />function </font><font  color="#0000BB">test_alter </font><font  color="#007700">(&amp;</font><font  color="#0000BB">$item1</font><font  color="#007700">, </font><font  color="#0000BB">$key</font><font  color="#007700">, </font><font  color="#0000BB">$prefix</font><font  color="#007700">) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;</font><font  color="#0000BB">$item1 </font><font  color="#007700">= </font><font  color="#DD0000">"$prefix: $item1"</font><font  color="#007700">;<br  />}<br  /><br  />function </font><font  color="#0000BB">test_print </font><font  color="#007700">(</font><font  color="#0000BB">$item2</font><font  color="#007700">, </font><font  color="#0000BB">$key</font><font  color="#007700">) {<br  />&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font  color="#DD0000">"$key. $item2&lt;br&gt;\n"</font><font  color="#007700">;<br  />}<br  />echo </font><font  color="#DD0000">"Before ...:\n"</font><font  color="#007700">;<br  /></font><font  color="#0000BB">array_walk </font><font  color="#007700">(</font><font  color="#0000BB">$fruits</font><font  color="#007700">, </font><font  color="#DD0000">'test_print'</font><font  color="#007700">);<br  /><br  /></font><font  color="#0000BB">array_walk </font><font  color="#007700">(</font><font  color="#0000BB">$fruits</font><font  color="#007700">, </font><font  color="#DD0000">'test_alter'</font><font  color="#007700">, </font><font  color="#DD0000">'fruit'</font><font  color="#007700">);<br  />echo </font><font  color="#DD0000">"... and after:\n"</font><font  color="#007700">;<br  /><br  /></font><font  color="#0000BB">array_walk </font><font  color="#007700">(</font><font  color="#0000BB">$fruits</font><font  color="#007700">, </font><font  color="#DD0000">'test_print'</font><font  color="#007700">);<br  /></font><font  color="#0000BB">?&gt;</font>
</font>
</code></TD
></TR
></TABLE
><P  >&#13;       以上程序输出为：
      </P
><TABLE  BORDER="0" BGCOLOR="#E0E0E0" CELLPADDING="5" ><TR  ><TD  ><code ><font  color="#000000">
Before ...:<br  />d. lemon<br  />a. orange<br  />b. banana<br  />c. apple<br  />... and after:<br  />d. fruit: lemon<br  />a. fruit: orange<br  />b. fruit: banana<br  />c. fruit: apple</font>
</code></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
>
    </P
><P  >&#13;     参见 <A  HREF="function.list.html" ><B  CLASS="function" >list()</B
></A
>，<A  HREF="control-structures.foreach.html" >foreach</A
>，<A  HREF="function.each.html" ><B  CLASS="function" >each()</B
></A
>
     和 <A  HREF="function.call-user-func-array.html" ><B  CLASS="function" >call_user_func_array()</B
></A
>。
    </P
></DIV
><BR></TD><TD><IMG SRC="spacer.gif" WIDTH="10" HEIGHT="1"></TD></TR><TR><TD COLSPAN="3"><DIV CLASS="NAVFOOTER"><TABLE BGCOLOR="#CCCCFF" BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR BGCOLOR="#333366"><TD><IMG SRC="spacer.gif" BORDER="0" WIDTH="1" HEIGHT="1"><BR></TD></TR><TR><TD><TABLE  SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="3" CELLSPACING="0" ><TR  ><TD  WIDTH="33%" ALIGN="left" VALIGN="top" ><A  HREF="function.array-values.html" ACCESSKEY="P" >后退</A
></TD
><TD  WIDTH="34%" ALIGN="center" VALIGN="top" ><A  HREF="index.html" ACCESSKEY="H" >起点</A
></TD
><TD  WIDTH="33%" ALIGN="right" VALIGN="top" ><A  HREF="function.array.html" ACCESSKEY="N" >前进</A
></TD
></TR
><TR  ><TD  WIDTH="33%" ALIGN="left" VALIGN="top" >array_values</TD
><TD  WIDTH="34%" ALIGN="center" VALIGN="top" ><A  HREF="ref.array.html" ACCESSKEY="U" >上一级</A
></TD
><TD  WIDTH="33%" ALIGN="right" VALIGN="top" >array</TD
></TR
></TABLE></TD></TR></TABLE></DIV></TD></TR></TABLE></BODY
></HTML
>
